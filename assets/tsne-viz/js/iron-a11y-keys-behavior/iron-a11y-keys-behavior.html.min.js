//~~WEBPATH~~/iron-a11y-keys-behavior/iron-a11y-keys-behavior.html.js
(function(){function a(a,b){var c="";if(a)if(a=a.toLowerCase()," "===a||p.test(a))c="space";else if(r.test(a))c="esc";else if(1==a.length){if(!b||k.test(a))c=a}else c=m.test(a)?a.replace("arrow",""):"multiply"==a?"*":a;return c}function b(b,c){var d=b.hasModifiers;if(c.key)d=a(c.key,d);else if(c.detail&&c.detail.key)d=a(c.detail.key,d);else{var d=c.keyIdentifier,h="";d&&(d in e?h=e[d]:l.test(d)?(d=parseInt(d.replace("U+","0x"),16),h=String.fromCharCode(d).toLowerCase()):h=d.toLowerCase());(d=h)||
(d=c.keyCode,h="",Number(d)&&(h=65<=d&&90>=d?String.fromCharCode(32+d):112<=d&&123>=d?"f"+(d-112):48<=d&&57>=d?String(d-48):96<=d&&105>=d?String(d-96):g[d]),d=h);d=d||""}return d===b.key&&(!b.hasModifiers||!!c.shiftKey===!!b.shiftKey&&!!c.ctrlKey===!!b.ctrlKey&&!!c.altKey===!!b.altKey&&!!c.metaKey===!!b.metaKey)}function c(a){return 1===a.length?{combo:a,key:a,event:"keydown"}:a.split("+").reduce(function(a,b){var c=b.split(":");b=c[0];c=c[1];b in h?(a[h[b]]=!0,a.hasModifiers=!0):(a.key=b,a.event=
c||"keydown");return a},{combo:a.split(":").shift()})}function d(a){return a.trim().split(" ").map(function(a){return c(a)})}var e={"U+0008":"backspace","U+0009":"tab","U+001B":"esc","U+0020":"space","U+007F":"del"},g={8:"backspace",9:"tab",13:"enter",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",32:"space",37:"left",38:"up",39:"right",40:"down",46:"del",106:"*"},h={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey"},k=/[a-z0-9*]/,l=/U\+/,m=/^arrow/,p=/^space(bar)?/,r=/^escape$/;
Polymer.IronA11yKeysBehavior={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:["_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)"],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},
addOwnKeyBinding:function(a,b){this._imperativeKeyBindings[a]=b;this._prepKeyBindings();this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={};this._prepKeyBindings();this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(a,c){c=d(c);for(var e=0;e<c.length;++e)if(b(c[e],a))return!0;return!1},_collectKeyBindings:function(){var a=this.behaviors.map(function(a){return a.keyBindings});-1===a.indexOf(this.keyBindings)&&a.push(this.keyBindings);return a},
_prepKeyBindings:function(){this._keyBindings={};this._collectKeyBindings().forEach(function(a){for(var b in a)this._addKeyBinding(b,a[b])},this);for(var a in this._imperativeKeyBindings)this._addKeyBinding(a,this._imperativeKeyBindings[a]);for(var b in this._keyBindings)this._keyBindings[b].sort(function(a,b){a=a[0].hasModifiers;return a===b[0].hasModifiers?0:a?-1:1})},_addKeyBinding:function(a,b){d(a).forEach(function(a){this._keyBindings[a.event]=this._keyBindings[a.event]||[];this._keyBindings[a.event].push([a,
b])},this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners();this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){this.keyEventTarget&&Object.keys(this._keyBindings).forEach(function(a){var b=this._onKeyBindingEvent.bind(this,this._keyBindings[a]);this._boundKeyHandlers.push([this.keyEventTarget,a,b]);this.keyEventTarget.addEventListener(a,b)},this)},_unlistenKeyEventListeners:function(){for(var a,b,c;this._boundKeyHandlers.length;)a=this._boundKeyHandlers.pop(),
b=a[0],c=a[1],a=a[2],b.removeEventListener(c,a)},_onKeyBindingEvent:function(a,c){this.stopKeyboardEventPropagation&&c.stopPropagation();if(!c.defaultPrevented)for(var d=0;d<a.length;d++){var e=a[d][0],g=a[d][1];if(b(e,c)&&(this._triggerKeyHandler(e,g,c),c.defaultPrevented))break}},_triggerKeyHandler:function(a,b,c){var d=Object.create(a);d.keyboardEvent=c;a=new CustomEvent(a.event,{detail:d,cancelable:!0});this[b].call(this,a);a.defaultPrevented&&c.preventDefault()}}})();