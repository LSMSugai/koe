//~~WEBPATH~~/vz-projector/scatterPlotVisualizerCanvasLabels.js
var Gd=function(){function a(a){this.labelsActive=!0;this.canvas=document.createElement("canvas");a.appendChild(this.canvas);this.gc=this.canvas.getContext("2d");this.canvas.style.position="absolute";this.canvas.style.left="0";this.canvas.style.top="0";this.canvas.style.pointerEvents="none"}a.prototype.removeAllLabels=function(){this.gc.clearRect(0,0,this.canvas.width*window.devicePixelRatio,this.canvas.height*window.devicePixelRatio)};a.prototype.makeLabels=function(a){if(null!=a.labels&&0!==a.labels.pointIndices.length&&
null!=this.worldSpacePointPositions){var b=a.labels,d=a.cameraType===vc.Perspective,e=parseInt(this.gc.font,10),g=window.devicePixelRatio;var h=this.canvas.width*g;var k=this.canvas.height*g;h=new Yb({loX:0,hiX:h,loY:0,hiY:k},h/25,k/50);var k=d3.scalePow().exponent(Math.E).domain([a.farthestCameraSpacePointZ,a.nearestCameraSpacePointZ]).range([.1,1]),l=a.camera.position,m=l.clone().sub(a.cameraTarget),p=new V.Vector3;this.gc.textBaseline="middle";this.gc.miterLimit=2;for(var r=Math.min(1E4,b.pointIndices.length),
n=0;n<r;++n){var t=Ac(this.worldSpacePointPositions,b.pointIndices[n]);p.copy(l).sub(t);if(!(0>m.dot(p))){var q=a.camera,u=a.screenWidth;var v=a.screenHeight;var y=window.devicePixelRatio;t=(new V.Vector3).copy(t).project(q);v=[(t.x+1)/2*u*y,-((t.y-1)/2*v)*y];u=v[0];v=v[1];u+=4;t={loX:u-2,hiX:u+1+2,loY:v-e/2-2,hiY:v+e/2+2};h.insert(t,!0)&&(y=b.labelStrings[n],this.gc.font=b.defaultFontSize*b.scaleFactors[n]*g+"px roboto",t.hiX+=this.gc.measureText(y).width-1,h.insert(t)&&(t=1,d&&1===b.useSceneOpacityFlags[n]&&
(t=k(p.length())),this.gc.fillStyle=this.styleStringFromPackedRgba(b.fillColors,n,t),this.gc.strokeStyle=this.styleStringFromPackedRgba(b.strokeColors,n,t),this.gc.lineWidth=3,this.gc.strokeText(y,u,v),this.gc.lineWidth=6,this.gc.fillText(y,u,v)))}}}};a.prototype.styleStringFromPackedRgba=function(a,c,d){c*=3;return"rgba("+a[c]+","+a[c+1]+","+a[c+2]+","+d+")"};a.prototype.onResize=function(a,c){var b=window.devicePixelRatio;this.canvas.width=a*b;this.canvas.height=c*b;this.canvas.style.width=a+"px";
this.canvas.style.height=c+"px"};a.prototype.dispose=function(){this.removeAllLabels();this.gc=this.canvas=null};a.prototype.onPointPositionsChanged=function(a){this.worldSpacePointPositions=a;this.removeAllLabels()};a.prototype.onRender=function(a){this.labelsActive&&(this.removeAllLabels(),this.makeLabels(a))};a.prototype.setScene=function(){};a.prototype.onPickingRender=function(){};return a}();