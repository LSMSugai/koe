//~~WEBPATH~~/vz-projector/sptree.js
var Zb=function(){function a(a){if(1>a.length)throw Error("There should be at least 1 data point");this.dim=a[0].length;this.masks=Array(Math.pow(2,this.dim));for(var b=0;b<this.masks.length;++b)this.masks[b]=1<<b;for(var d=Array(this.dim),e=Number.POSITIVE_INFINITY,b=0;b<d.length;++b)d[b]=e;for(var e=Array(this.dim),b=Number.NEGATIVE_INFINITY,g=0;g<e.length;++g)e[g]=b;for(g=0;g<a.length;++g)for(b=0;b<this.dim;++b)d[b]=Math.min(d[b],a[g][b]),e[b]=Math.max(e[b],a[g][b]);for(var g=Array(this.dim),h=
0,b=0;b<this.dim;++b){var k=e[b]-d[b];g[b]=d[b]+k/2;h=Math.max(h,k/2)}this.root={box:{center:g,halfDim:h},point:a[0]};for(g=1;g<a.length;++g)this.insert(this.root,a[g])}a.prototype.visit=function(a,c){void 0===c&&(c=!1);this.visitNode(this.root,a,c)};a.prototype.visitNode=function(a,c,d){if(d)var b=c(a);else{b=Array(this.dim);for(var g=Array(this.dim),h=0;h<this.dim;++h)b[h]=a.box.center[h]-a.box.halfDim,g[h]=a.box.center[h]+a.box.halfDim;b=c(a,b,g)}if(a.children&&!b)for(b=0;b<a.children.length;++b)(g=
a.children[b])&&this.visitNode(g,c,d)};a.prototype.insert=function(a,c){null==a.children&&(a.children=Array(this.masks.length));for(var b=0,e=0;e<this.dim;++e)c[e]>a.box.center[e]&&(b|=this.masks[e]);null==a.children[b]?this.makeChild(a,b,c):this.insert(a.children[b],c)};a.prototype.makeChild=function(a,c,d){for(var b=a.box.center,g=a.box.halfDim/2,h=Array(this.dim),k=0;k<this.dim;++k)h[k]=c&1<<k?b[k]+g:b[k]-g;a.children[c]={box:{center:h,halfDim:g},point:d}};return a}();