//~~WEBPATH~~/tf-imports/OrbitControls.js
V.OrbitControls=function(a,b){function c(){return Math.pow(.95,q.zoomSpeed)}function d(a){q.object instanceof V.PerspectiveCamera?D/=a:q.object instanceof V.OrthographicCamera?(q.object.zoom=Math.max(q.minZoom,Math.min(q.maxZoom,q.object.zoom*a)),q.object.updateProjectionMatrix(),H=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),q.enableZoom=!1)}function e(a){q.object instanceof V.PerspectiveCamera?D*=a:q.object instanceof V.OrthographicCamera?
(q.object.zoom=Math.max(q.minZoom,Math.min(q.maxZoom,q.object.zoom/a)),q.object.updateProjectionMatrix(),H=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),q.enableZoom=!1)}function g(a){if(!1!==q.enabled){a.preventDefault();if(a.button===q.mouseButtons.ORBIT){if(!1===q.enableRotate)return;B.set(a.clientX,a.clientY);A=z.ROTATE}else if(a.button===q.mouseButtons.ZOOM){if(!1===q.enableZoom)return;P.set(a.clientX,a.clientY);A=z.DOLLY}else if(a.button===
q.mouseButtons.PAN){if(!1===q.enablePan)return;R.set(a.clientX,a.clientY);A=z.PAN}A!==z.NONE&&(document.addEventListener("mousemove",h,!1),document.addEventListener("mouseup",k,!1),document.addEventListener("mouseout",k,!1),q.dispatchEvent(v))}}function h(a){!1!==q.enabled&&(a.preventDefault(),A===z.ROTATE?!1!==q.enableRotate&&(L.set(a.clientX,a.clientY),K.subVectors(L,B),a=q.domElement===document?q.domElement.body:q.domElement,C.theta-=2*Math.PI*K.x/a.clientWidth*q.rotateSpeed,C.phi-=2*Math.PI*K.y/
a.clientHeight*q.rotateSpeed,B.copy(L),q.update()):A===z.DOLLY?!1!==q.enableZoom&&(O.set(a.clientX,a.clientY),G.subVectors(O,P),0<G.y?d(c()):0>G.y&&e(c()),P.copy(O),q.update()):A===z.PAN&&!1!==q.enablePan&&(Q.set(a.clientX,a.clientY),I.subVectors(Q,R),ba(I.x,I.y),R.copy(Q),q.update()))}function k(){!1!==q.enabled&&(document.removeEventListener("mousemove",h,!1),document.removeEventListener("mouseup",k,!1),document.removeEventListener("mouseout",k,!1),q.dispatchEvent(y),A=z.NONE)}function l(a){if(!1!==
q.enabled&&!1!==q.enableZoom&&(A===z.NONE||A===z.ROTATE)){a.preventDefault();a.stopPropagation();var b=0;void 0!==a.wheelDelta?b=a.wheelDelta:void 0!==a.detail&&(b=-a.detail);0<b?e(c()):0>b&&d(c());q.update();q.dispatchEvent(v);q.dispatchEvent(y)}}function m(a){if(!1!==q.enabled&&!1!==q.enableKeys&&!1!==q.enablePan)switch(a.keyCode){case q.keys.UP:ba(0,q.keyPanSpeed);q.update();break;case q.keys.BOTTOM:ba(0,-q.keyPanSpeed);q.update();break;case q.keys.LEFT:ba(q.keyPanSpeed,0);q.update();break;case q.keys.RIGHT:ba(-q.keyPanSpeed,
0),q.update()}}function p(a){if(!1!==q.enabled){switch(a.touches.length){case 1:if(!1===q.enableRotate)return;B.set(a.touches[0].pageX,a.touches[0].pageY);A=z.TOUCH_ROTATE;break;case 2:if(!1===q.enableZoom)return;var b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;P.set(0,Math.sqrt(b*b+a*a));A=z.TOUCH_DOLLY;break;case 3:if(!1===q.enablePan)return;R.set(a.touches[0].pageX,a.touches[0].pageY);A=z.TOUCH_PAN;break;default:A=z.NONE}A!==z.NONE&&q.dispatchEvent(v)}}function r(a){if(!1!==
q.enabled)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:if(!1===q.enableRotate)break;if(A!==z.TOUCH_ROTATE)break;L.set(a.touches[0].pageX,a.touches[0].pageY);K.subVectors(L,B);var b=q.domElement===document?q.domElement.body:q.domElement;C.theta-=2*Math.PI*K.x/b.clientWidth*q.rotateSpeed;C.phi-=2*Math.PI*K.y/b.clientHeight*q.rotateSpeed;B.copy(L);q.update();break;case 2:if(!1===q.enableZoom)break;if(A!==z.TOUCH_DOLLY)break;b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-
a.touches[1].pageY;O.set(0,Math.sqrt(b*b+a*a));G.subVectors(O,P);0<G.y?e(c()):0>G.y&&d(c());P.copy(O);q.update();break;case 3:if(!1===q.enablePan)break;if(A!==z.TOUCH_PAN)break;Q.set(a.touches[0].pageX,a.touches[0].pageY);I.subVectors(Q,R);ba(I.x,I.y);R.copy(Q);q.update();break;default:A=z.NONE}}function n(){!1!==q.enabled&&(q.dispatchEvent(y),A=z.NONE)}function t(a){a.preventDefault()}this.object=a;this.domElement=void 0!==b?b:document;this.enabled=!0;this.target=new V.Vector3;this.minDistance=0;
this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=!1;this.dampingFactor=.25;this.enableZoom=!0;this.zoomSpeed=1;this.enableRotate=!0;this.rotateSpeed=1;this.enablePan=!0;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.enableKeys=!0;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={ORBIT:V.MOUSE.LEFT,ZOOM:V.MOUSE.MIDDLE,PAN:V.MOUSE.RIGHT};
this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;this.getPolarAngle=function(){return E.phi};this.getAzimuthalAngle=function(){return E.theta};this.reset=function(){q.target.copy(q.target0);q.object.position.copy(q.position0);q.object.zoom=q.zoom0;q.object.updateProjectionMatrix();q.dispatchEvent(u);q.update();A=z.NONE};this.update=function(){var b=new V.Vector3,c=(new V.Quaternion).setFromUnitVectors(a.up,new V.Vector3(0,1,0)),d=c.clone().inverse(),
e=new V.Vector3,g=new V.Quaternion;return function(){var a=q.object.position;b.copy(a).sub(q.target);Oa(b,c);E.setFromVector3(b);q.autoRotate&&A===z.NONE&&(C.theta-=2*Math.PI/60/60*q.autoRotateSpeed);E.theta+=C.theta;E.phi+=C.phi;E.theta=Math.max(q.minAzimuthAngle,Math.min(q.maxAzimuthAngle,E.theta));E.phi=Math.max(q.minPolarAngle,Math.min(q.maxPolarAngle,E.phi));E.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,E.phi));E.radius*=D;E.radius=Math.max(q.minDistance,Math.min(q.maxDistance,E.radius));q.target.add(F);
var h=E,k=Math.sin(h.phi)*h.radius;b.x=k*Math.sin(h.theta);b.y=Math.cos(h.phi)*h.radius;b.z=k*Math.cos(h.theta);Oa(b,d);a.copy(q.target).add(b);q.object.lookAt(q.target);!0===q.enableDamping?(C.theta*=1-q.dampingFactor,C.phi*=1-q.dampingFactor):C.set(0,0,0);D=1;F.set(0,0,0);return H||e.distanceToSquared(q.object.position)>x||8*(1-g.dot(q.object.quaternion))>x?(q.dispatchEvent(u),e.copy(q.object.position),g.copy(q.object.quaternion),H=!1,!0):!1}}();this.dispose=function(){q.domElement.removeEventListener("contextmenu",
t,!1);q.domElement.removeEventListener("mousedown",g,!1);q.domElement.removeEventListener("mousewheel",l,!1);q.domElement.removeEventListener("MozMousePixelScroll",l,!1);q.domElement.removeEventListener("touchstart",p,!1);q.domElement.removeEventListener("touchend",n,!1);q.domElement.removeEventListener("touchmove",r,!1);document.removeEventListener("mousemove",h,!1);document.removeEventListener("mouseup",k,!1);document.removeEventListener("mouseout",k,!1);window.removeEventListener("keydown",m,!1)};
var q=this,u={type:"change"},v={type:"start"},y={type:"end"},z={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},A=z.NONE,x=1E-6,E=new V.Spherical,C=new V.Spherical,D=1,F=new V.Vector3,H=!1,B=new V.Vector2,L=new V.Vector2,K=new V.Vector2,R=new V.Vector2,Q=new V.Vector2,I=new V.Vector2,P=new V.Vector2,O=new V.Vector2,G=new V.Vector2,J=function(){var a=new V.Vector3;return function(b,c){Ra(a,c,0);a.multiplyScalar(-b);F.add(a)}}(),N=function(){var a=new V.Vector3;return function(b,
c){Ra(a,c,1);a.multiplyScalar(b);F.add(a)}}(),ba=function(){var a=new V.Vector3;return function(b,c){var d=q.domElement===document?q.domElement.body:q.domElement;if(q.object instanceof V.PerspectiveCamera){a.copy(q.object.position).sub(q.target);var e=a.length(),e=e*Math.tan(q.object.fov/2*Math.PI/180);J(2*b*e/d.clientHeight,q.object.matrix);N(2*c*e/d.clientHeight,q.object.matrix)}else q.object instanceof V.OrthographicCamera?(J(b*(q.object.right-q.object.left)/q.object.zoom/d.clientWidth,q.object.matrix),
N(c*(q.object.top-q.object.bottom)/q.object.zoom/d.clientHeight,q.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),q.enablePan=!1)}}();q.domElement.addEventListener("contextmenu",t,!1);q.domElement.addEventListener("mousedown",g,!1);q.domElement.addEventListener("mousewheel",l,!1);q.domElement.addEventListener("MozMousePixelScroll",l,!1);q.domElement.addEventListener("touchstart",p,!1);q.domElement.addEventListener("touchend",n,!1);q.domElement.addEventListener("touchmove",
r,!1);window.addEventListener("keydown",m,!1);this.update()};V.OrbitControls.prototype=Object.create(V.EventDispatcher.prototype);V.OrbitControls.prototype.constructor=V.OrbitControls;
Object.defineProperties(V.OrbitControls.prototype,{center:{get:function(){console.warn("THREE.OrbitControls: .center has been renamed to .target");return this.target}},noZoom:{get:function(){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");return!this.enableZoom},set:function(a){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");this.enableZoom=!a}},noRotate:{get:function(){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");
return!this.enableRotate},set:function(a){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");this.enableRotate=!a}},noPan:{get:function(){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");return!this.enablePan},set:function(a){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");this.enablePan=!a}},noKeys:{get:function(){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");
return!this.enableKeys},set:function(a){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");this.enableKeys=!a}},staticMoving:{get:function(){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");return!this.enableDamping},set:function(a){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");this.enableDamping=!a}},dynamicDampingFactor:{get:function(){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");
return this.dampingFactor},set:function(a){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");this.dampingFactor=a}}});